<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>///textrot studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Group 1: A-D (Static/Simple) -->
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Alfa+Slab+One&family=Amatic+SC:wght@400;700&family=Anton&family=Audiowide&family=Bangers&family=Bebas+Neue&family=Bruno+Ace+SC&family=Bungee&family=Bungee+Shade&family=Butcherman&family=Cinzel:wght@400;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Creepster&family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&family=Dancing+Script:wght@400;700&family=Diplomata&family=DM+Serif+Display:ital@0;1&family=DotGothic16&display=swap" rel="stylesheet">
    
    <!-- Group 2: E-J (Static/Simple - Excluding Complex Variable Fonts) -->
    <link href="https://fonts.googleapis.com/css2?family=Eater&family=Eduardo+Tunni&family=Ewert&family=Fascinate+Inline&family=Finger+Paint&family=Fira+Code:wght@300;400;600&family=Foldit&family=Frijole&family=Geostar&family=Gloria+Hallelujah&family=Great+Vibes&family=Grenze+Gotisch&family=Italiana&family=Jacquard+12&family=Jersey+10&display=swap" rel="stylesheet">

    <!-- Group 3: K-O (Static/Simple) -->
    <link href="https://fonts.googleapis.com/css2?family=Kablammo&family=Krona+One&family=Lato:ital,wght@0,400;0,700;1,400&family=League+Gothic&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Lobster&family=Lora:ital,wght@0,400..700;1,400..700&family=Major+Mono+Display&family=Megrim&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,400&family=Metal+Mania&family=Michroma&family=Micro+5&family=Monoton&family=Montserrat:wght@400;900&family=Nosifer&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Oi&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Orbitron:wght@400..900&family=Oswald:wght@200;400;700&family=Oxanium:wght@200..800&display=swap" rel="stylesheet">

    <!-- Group 4: P-R (Static/Simple + Rubik Collection) -->
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans:ital,wght@0,400;0,700;1,400&family=PT+Serif:ital,wght@0,400;0,700;1,400&family=Pacifico&family=Permanent+Marker&family=Piedra&family=Pixelify+Sans&family=Plaster&family=Playfair+Display:ital,wght@0,400;1,900&family=Poiret+One&family=Poppins:ital,wght@0,300;0,400;0,600;0,800;1,400&family=Press+Start+2P&family=Quantico:ital,wght@0,400;0,700;1,400&family=Raleway:ital,wght@0,100..900;1,100..900&family=Righteous&family=Roboto:ital,wght@0,300;0,400;0,700;1,400&family=Rock+Salt&family=Rubik+80s+Fade&family=Rubik+Beastly&family=Rubik+Broken+Fax&family=Rubik+Bubbles&family=Rubik+Burned&family=Rubik+Dirt&family=Rubik+Distressed&family=Rubik+Doodle+Shadow&family=Rubik+Doodle+Triangles&family=Rubik+Gemstones&family=Rubik+Glitch&family=Rubik+Glitch+Pop&family=Rubik+Iso&family=Rubik+Lines&family=Rubik+Maps&family=Rubik+Marker+Hatch&family=Rubik+Maze&family=Rubik+Microbe&family=Rubik+Mono+One&family=Rubik+Moonrocks&family=Rubik+Pixels&family=Rubik+Puddles&family=Rubik+Scribble&family=Rubik+Spray+Paint&family=Rubik+Storm&family=Rubik+Vinyl&family=Rubik+Wet+Paint&family=Rye&display=swap" rel="stylesheet">

    <!-- Group 5: S-Z (Static/Simple) -->
    <link href="https://fonts.googleapis.com/css2?family=Sancreek&family=Shadows+Into+Light&family=Share+Tech+Mono&family=Shojumaru&family=Silkscreen&family=Sixtyfour&family=Slackey&family=Smokum&family=Source+Sans+3:ital,wght@0,200..900;1,200..900&family=Space+Grotesk:wght@300..700&family=Space+Grotesque:wght@300..700&family=Space+Mono:ital,wght@0,400;1,700&family=Special+Elite&family=Syne:wght@400..800&family=Turret+Road:wght@200;300;400;500;700;800&family=Unbounded:wght@200..900&family=UnifrakturMaguntia&family=VT323&family=Vast+Shadow&family=Wallpoet&family=Workbench&family=Zen+Dots&display=swap" rel="stylesheet">

    <!-- Variable Fonts (Isolated & Corrected Sort Order) -->
    <!-- Inter: Standard Variable -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    
    <!-- Doto: wght, ROND -->
    <link href="https://fonts.googleapis.com/css2?family=Doto:wght,ROND@100..900,0..100&display=swap" rel="stylesheet">

    <!-- Gluten: slnt, wght -->
    <link href="https://fonts.googleapis.com/css2?family=Gluten:slnt,wght@-10..10,100..900&display=swap" rel="stylesheet">

    <!-- Handjet: Standard axes (wght) MUST precede Custom axes (ELGR, ELSH) -->
    <link href="https://fonts.googleapis.com/css2?family=Handjet:wght,ELGR,ELSH@100..900,1..2,0..16&display=swap" rel="stylesheet">
    
    <!-- Bodoni Moda: Alphabetical Order: ital, opsz, wght -->
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,400..900;1,6..96,400..900&display=swap" rel="stylesheet">
    
    <!-- Exo 2: Standard -->
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    
    <!-- Josefin Sans: Standard -->
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    
    <!-- Fraunces: Standard (ital, opsz, wght) then Custom (SOFT, WONK) -->
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght,SOFT,WONK@0,9..144,100..900,0..100,0..1;1,9..144,100..900,0..100,0..1&display=swap" rel="stylesheet">

    <!-- Sora: Standard Variable -->
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@100..800&display=swap" rel="stylesheet">

    <!-- Rubik: Standard Variable -->
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    
    <!-- Tilt Warp: Custom axes (XROT, YROT) -->
    <link href="https://fonts.googleapis.com/css2?family=Tilt+Warp:XROT,YROT@-45..45,-45..45&display=swap" rel="stylesheet">

    <!-- Color Fonts -->
    <!-- Nabla: Color Font Variable (EDPT, EHLT) -->
    <link href="https://fonts.googleapis.com/css2?family=Nabla:EDPT,EHLT@0..200,0..24&display=swap" rel="stylesheet">
    
    <!-- Kalnia Glaze: Color Font Variable (wdth, wght) -->
    <link href="https://fonts.googleapis.com/css2?family=Kalnia+Glaze:wdth,wght@100..125,100..700&display=swap" rel="stylesheet">
    
    <!-- Honk: Color Font Variable (MORF, SHLN) -->
    <link href="https://fonts.googleapis.com/css2?family=Honk:MORF,SHLN@0..45,0..100&display=swap" rel="stylesheet">

    <style>
      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #1a1a1a;
      }
      ::-webkit-scrollbar-thumb {
        background: #333;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }
      
      #font-loading-debug {
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 9999;
        background: rgba(0,0,0,0.95);
        border: 1px solid #333;
        color: #fff;
        border-radius: 8px;
        font-family: monospace;
        font-size: 11px;
        width: 320px;
        height: 400px;
        pointer-events: auto;
        box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        display: none; /* Controlled by React settings */
        flex-direction: column;
      }
      #font-debug-header {
        padding: 12px 15px;
        font-weight: bold;
        border-bottom: 1px solid #444;
        background: rgba(0,0,0,0.2);
        border-radius: 8px 8px 0 0;
        flex-shrink: 0;
        letter-spacing: 0.5px;
      }
      #font-list {
        flex: 1;
        overflow-y: auto;
        padding: 10px 15px;
      }
      #font-debug-footer {
        padding: 10px 15px;
        border-top: 1px solid #444;
        background: rgba(0,0,0,0.2);
        border-radius: 0 0 8px 8px;
        flex-shrink: 0;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      #recheck-fonts-btn {
        flex: 1;
        background: #333;
        border: 1px solid #555;
        color: white;
        padding: 6px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 10px;
        font-weight: bold;
        text-transform: uppercase;
      }
      #recheck-fonts-btn:hover { background: #444; }
      #font-loaded-count {
        font-size: 10px;
        color: #888;
        font-weight: bold;
        min-width: 40px;
        text-align: right;
      }

      .font-status-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 3px;
        padding: 2px 4px;
        border-radius: 2px;
        cursor: pointer;
        user-select: none;
      }
      .font-status-row:hover {
        background: rgba(255,255,255,0.1);
      }
      .font-status-loaded { color: #4ade80; font-weight: bold; }
      .font-status-failed { color: #f87171; font-weight: bold; }
      .font-status-pending { color: #fbbf24; }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom": "https://aistudiocdn.com/react-dom@^19.2.0",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.30.0",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
  }
}
</script>
</head>
  <body class="bg-neutral-950 text-white antialiased overflow-hidden">
    <div id="root"></div>
    <div id="font-loading-debug">
        <div id="font-debug-header">FONT DIAGNOSTICS</div>
        <div id="font-list"></div>
        <div id="font-debug-footer">
            <button id="recheck-fonts-btn">Re-Check Status</button>
            <span id="font-loaded-count">0/0</span>
        </div>
    </div>
    <script>
        (function() {
            const container = document.getElementById('font-list');
            const debugPanel = document.getElementById('font-loading-debug');
            const recheckBtn = document.getElementById('recheck-fonts-btn');
            const countLabel = document.getElementById('font-loaded-count');
            
            // Collect all font families from links
            const fontFamilies = new Set();
            const links = document.querySelectorAll('link[href*="fonts.googleapis.com"]');
            
            links.forEach(link => {
                try {
                    const url = new URL(link.href);
                    const familyParams = url.searchParams.getAll('family');
                    familyParams.forEach(param => {
                        // Extract name before colon
                        const name = param.split(':')[0];
                        fontFamilies.add(name);
                    });
                } catch(e) {}
            });

            if (fontFamilies.size === 0) {
                container.innerHTML = "No Google Fonts detected in DOM.";
                return;
            }

            const families = Array.from(fontFamilies).sort();
            countLabel.textContent = `0/${families.length}`;
            
            // Render rows
            families.forEach(font => {
                const row = document.createElement('div');
                row.className = 'font-status-row';
                // Replace spaces for ID safety
                const safeName = font.replace(/[^a-zA-Z0-9]/g, '-');
                row.innerHTML = `<span>${font}</span><span id="status-${safeName}" class="font-status-pending">Wait</span>`;
                row.title = "Double-click to view in Font Book";
                
                // Add dblclick to open font book
                row.addEventListener('dblclick', () => {
                   window.dispatchEvent(new CustomEvent('textrot-open-font', { detail: font }));
                });

                container.appendChild(row);
            });

            // Check function
            async function checkFonts() {
                // Ensure document fonts is ready before checking
                await document.fonts.ready;
                
                let loadedCount = 0;
                
                families.forEach(font => {
                    const safeName = font.replace(/[^a-zA-Z0-9]/g, '-');
                    const statusEl = document.getElementById(`status-${safeName}`);
                    
                    // Simple check: Is the font loaded?
                    const isLoaded = document.fonts.check(`12px "${font}"`);
                    
                    if (statusEl) {
                        if (isLoaded) {
                            statusEl.textContent = 'OK';
                            statusEl.className = 'font-status-loaded';
                            loadedCount++;
                        } else {
                            statusEl.textContent = 'FAIL';
                            statusEl.className = 'font-status-failed';
                        }
                    }
                });
                
                countLabel.textContent = `${loadedCount}/${families.length}`;
                console.log(`[FontDebug] ${loadedCount}/${families.length} fonts loaded.`);
            }
            
            recheckBtn.addEventListener('click', () => {
                checkFonts();
            });
            
            // Run check shortly after load
            if (document.fonts) {
                document.fonts.ready.then(checkFonts);
                // Also poll once in case ready fired early
                setTimeout(checkFonts, 2000);
            } else {
                container.innerHTML = "Font Loading API not supported.";
            }
        })();
    </script>
  </body>
</html>